#!/usr/bin/env bash
set -e
if git diff --cached -U0 | grep -E "eyJ[A-Za-z0-9_-]{5,}\.[A-Za-z0-9._-]{5,}\.[A-Za-z0-9._-]{5,}|SERVICE[_ -]?ROLE|ANON[_ -]?KEY|OPENAI_API_KEY|API[_ -]?KEY|TOKEN|SECRET" >/dev/null; then
  echo "âœ‹ Commit blocked: potential secret detected. Use env vars (.env) instead."
  exit 1
fi
